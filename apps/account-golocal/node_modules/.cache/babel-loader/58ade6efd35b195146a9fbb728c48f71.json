{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_oidc_core_1 = require(\"@axa-fr/react-oidc-core\");\n\nvar withServices_1 = __importDefault(require(\"../withServices\"));\n\nvar oidcContext_1 = require(\"../oidcContext\");\n\nexports.useOidcSecure = function (authenticateUserInternal, userManager, location, history, oidcLogInternal, AuthenticatingInternal, isRequireAuthenticationInternal, WrappedComponent) {\n  var _a = react_1.useContext(oidcContext_1.AuthenticationContext),\n      isEnabled = _a.isEnabled,\n      oidcUser = _a.oidcUser,\n      authenticating = _a.authenticating,\n      isLoggingOut = _a.isLoggingOut;\n\n  react_1.useEffect(function () {\n    oidcLogInternal.info('Protection : ', isEnabled);\n\n    if (isEnabled && !isLoggingOut) {\n      oidcLogInternal.info('Protected component mounted');\n      authenticateUserInternal(userManager, location, history)();\n    }\n\n    return function () {\n      oidcLogInternal.info('Protected component unmounted');\n    };\n  }, [isEnabled, authenticateUserInternal, userManager, oidcLogInternal, location, history, isLoggingOut]);\n  var requiredAuth = react_1.useMemo(function () {\n    return isRequireAuthenticationInternal(oidcUser, false) && isEnabled;\n  }, [isEnabled, isRequireAuthenticationInternal, oidcUser]);\n  var AuthenticatingComponent = authenticating || AuthenticatingInternal;\n  return requiredAuth ? AuthenticatingComponent : WrappedComponent;\n};\n\nexports.OidcSecureWithInjectedFunctions = function (_a) {\n  var children = _a.children,\n      location = _a.location,\n      history = _a.history,\n      authenticateUserInternal = _a.authenticateUserInternal,\n      getUserManagerInternal = _a.getUserManagerInternal,\n      isRequireAuthenticationInternal = _a.isRequireAuthenticationInternal,\n      AuthenticatingInternal = _a.AuthenticatingInternal;\n  var userManager = getUserManagerInternal();\n  var WrappedComponent = react_1.useMemo(function () {\n    return function () {\n      return react_1.default.createElement(react_1.default.Fragment, null, children);\n    };\n  }, [children]);\n  var ReactOidcComponent = exports.useOidcSecure(authenticateUserInternal, userManager, location, history, react_oidc_core_1.oidcLog, AuthenticatingInternal, isRequireAuthenticationInternal, WrappedComponent);\n  return react_1.default.createElement(ReactOidcComponent, null);\n};\n\nvar OidcSecure = react_oidc_core_1.withRouter(withServices_1.default(exports.OidcSecureWithInjectedFunctions, {\n  authenticateUserInternal: react_oidc_core_1.authenticateUser,\n  getUserManagerInternal: react_oidc_core_1.getUserManager,\n  isRequireAuthenticationInternal: react_oidc_core_1.isRequireAuthentication,\n  AuthenticatingInternal: react_oidc_core_1.Authenticating\n}));\n\nexports.withOidcSecure = function (WrappedComponent) {\n  return function (props) {\n    return react_1.default.createElement(OidcSecure, null, react_1.default.createElement(WrappedComponent, __assign({}, props)));\n  };\n};\n\nexports.default = OidcSecure;","map":{"version":3,"sources":["D:/Documents/IUT/S3D/Projet Entreprise/GoLocal/goLocal-Client/account-golocal/node_modules/@axa-fr/react-oidc-context/dist/reactServices/OidcSecure.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importStar","mod","__esModule","result","k","__importDefault","defineProperty","exports","value","react_1","require","react_oidc_core_1","withServices_1","oidcContext_1","useOidcSecure","authenticateUserInternal","userManager","location","history","oidcLogInternal","AuthenticatingInternal","isRequireAuthenticationInternal","WrappedComponent","_a","useContext","AuthenticationContext","isEnabled","oidcUser","authenticating","isLoggingOut","useEffect","info","requiredAuth","useMemo","AuthenticatingComponent","OidcSecureWithInjectedFunctions","children","getUserManagerInternal","default","createElement","Fragment","ReactOidcComponent","oidcLog","OidcSecure","withRouter","authenticateUser","getUserManager","isRequireAuthentication","Authenticating","withOidcSecure","props"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar react_oidc_core_1 = require(\"@axa-fr/react-oidc-core\");\nvar withServices_1 = __importDefault(require(\"../withServices\"));\nvar oidcContext_1 = require(\"../oidcContext\");\nexports.useOidcSecure = function (authenticateUserInternal, userManager, location, history, oidcLogInternal, AuthenticatingInternal, isRequireAuthenticationInternal, WrappedComponent) {\n    var _a = react_1.useContext(oidcContext_1.AuthenticationContext), isEnabled = _a.isEnabled, oidcUser = _a.oidcUser, authenticating = _a.authenticating, isLoggingOut = _a.isLoggingOut;\n    react_1.useEffect(function () {\n        oidcLogInternal.info('Protection : ', isEnabled);\n        if (isEnabled && !isLoggingOut) {\n            oidcLogInternal.info('Protected component mounted');\n            authenticateUserInternal(userManager, location, history)();\n        }\n        return function () {\n            oidcLogInternal.info('Protected component unmounted');\n        };\n    }, [isEnabled, authenticateUserInternal, userManager, oidcLogInternal, location, history, isLoggingOut]);\n    var requiredAuth = react_1.useMemo(function () { return isRequireAuthenticationInternal(oidcUser, false) && isEnabled; }, [\n        isEnabled,\n        isRequireAuthenticationInternal,\n        oidcUser,\n    ]);\n    var AuthenticatingComponent = authenticating || AuthenticatingInternal;\n    return requiredAuth ? AuthenticatingComponent : WrappedComponent;\n};\nexports.OidcSecureWithInjectedFunctions = function (_a) {\n    var children = _a.children, location = _a.location, history = _a.history, authenticateUserInternal = _a.authenticateUserInternal, getUserManagerInternal = _a.getUserManagerInternal, isRequireAuthenticationInternal = _a.isRequireAuthenticationInternal, AuthenticatingInternal = _a.AuthenticatingInternal;\n    var userManager = getUserManagerInternal();\n    var WrappedComponent = react_1.useMemo(function () { return function () { return react_1.default.createElement(react_1.default.Fragment, null, children); }; }, [children]);\n    var ReactOidcComponent = exports.useOidcSecure(authenticateUserInternal, userManager, location, history, react_oidc_core_1.oidcLog, AuthenticatingInternal, isRequireAuthenticationInternal, WrappedComponent);\n    return react_1.default.createElement(ReactOidcComponent, null);\n};\nvar OidcSecure = react_oidc_core_1.withRouter(withServices_1.default(exports.OidcSecureWithInjectedFunctions, {\n    authenticateUserInternal: react_oidc_core_1.authenticateUser,\n    getUserManagerInternal: react_oidc_core_1.getUserManager,\n    isRequireAuthenticationInternal: react_oidc_core_1.isRequireAuthentication,\n    AuthenticatingInternal: react_oidc_core_1.Authenticating,\n}));\nexports.withOidcSecure = function (WrappedComponent) { return function (props) { return (react_1.default.createElement(OidcSecure, null,\n    react_1.default.createElement(WrappedComponent, __assign({}, props)))); }; };\nexports.default = OidcSecure;\n"]},"metadata":{},"sourceType":"script"}